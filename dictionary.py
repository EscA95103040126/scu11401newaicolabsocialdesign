import re

# === [K-POP 本地超級資料庫] ===
CORRECTIONS = {
    # === 1. 音樂節目與大型舞台 (Music Shows & Events) ===
    "音樂銀行": "뮤직뱅크", "Music Bank": "뮤직뱅크", "音銀": "뮤직뱅크",
    "人氣歌謠": "인기가요", "Inkigayo": "인기가요",
    "音樂中心": "쇼! 음악중심", "Music Core": "쇼! 음악중심", "音中": "쇼! 음악중심",
    "M Countdown": "엠카운트다운", "MCD": "엠카운트다운", "엠카": "엠카",
    "The Show": "더쇼",
    "Show Champion": "쇼챔피언",
    
    # 年末舞台與頒獎典禮
    "歌謠大戰": "가요대전", # SBS
    "歌謠大祝祭": "가요대축제", # KBS
    "歌謠大祭典": "가요대제전", # MBC
    "MMA": "멜론뮤직어워드", "Melon": "멜론",
    "MAMA": "마마", "Mnet Asian Music Awards": "마마",
    "GDA": "골든디스크", "金唱片": "골든디스크",
    "AAA": "아시아 아티스트 어워즈",
    "TMA": "더팩트 뮤직 어워즈",
    "Waterbomb": "워터밤", "潑水節": "워터밤",
    "大學祭": "대학축제", "校慶": "대학축제",
    
    # 舞台相關用語
    "舞台": "무대", "Stage": "무대",
    "直拍": "직캠", "Fancam": "직캠",
    "全哥": "전체 직캠", "單人直拍": "개인 직캠",
    "臉拍": "페이스캠", "Facecam": "페이스캠",
    "練習室": "안무영상", "Dance Practice": "안무영상",
    "消音": "MR 제거", "MR Removed": "MR 제거",
    "安可": "앵콜", "Encore": "앵콜",
    "一位": "1위",
    "預錄": "사녹", "事前錄製": "사녹",
    "上班路": "출근길", "下班路": "퇴근길",
    "Ending妖精": "엔딩요정",

    # === 2. 女團成員 (Girl Groups) ===

    #Red Velvet
    "Red Velvet": "레드벨벳", "紅貝貝": "레드벨벳",
    "Irene": "아이린", "裴柱現": "아이린",
    "Seulgi": "슬기", "康瑟琪": "슬기",
    "Wendy": "웬디", "孫承完": "웬디",
    "Joy": "조이", "朴秀英": "조이",
    "Yeri": "예리", "金藝琳": "예리",
    
    # NMIXX
    "NMIXX": "엔믹스",
    "薛侖娥": "설윤", "薛侖": "설윤", "Sullyoon": "설윤",
    "海嫄": "해원", "Haewon": "해원", "吳海嫄": "오해원",
    "Lily": "릴리", "朴珍": "릴리",
    "Bae": "배이", "真率": "배이",
    "智佑": "지우", "Jiwoo": "지우",
    "圭珍": "규진", "Kyujin": "규진",

    # NewJeans
    "NewJeans": "뉴진스", "紐吉斯": "뉴진스",
    "Minji": "민지", "玟池": "민지", "金玟池": "김민지",
    "Hanni": "하니", "哈尼": "하니",
    "Danielle": "다니엘",
    "Haerin": "해린", "海麟": "해린", "姜海麟": "강해린",
    "Hyein": "혜인", "惠仁": "혜인",

    # IVE
    "IVE": "아이브",
    "員瑛": "원영", "張員瑛": "장원영", "Wonyoung": "원영",
    "兪真": "유진", "安兪真": "안유진", "Yujin": "유진",
    "Gaeul": "가을", "秋天": "가을",
    "Rei": "레이", "直井怜": "레이",
    "Liz": "리즈", "金志垣": "리즈",
    "Leeseo": "이서", "李賢瑞": "이서",

    # aespa
    "aespa": "에스파",
    "Karina": "카리나", "柳智敏": "카리나",
    "Giselle": "지젤", "内永枝利": "지젤",
    "Winter": "윈터", "金旼炡": "윈터", "旼炡": "윈터", "冬冬": "윈터",
    "Ningning": "닝닝", "寧寧": "닝닝",

    # LE SSERAFIM
    "LE SSERAFIM": "르세라핌", "熾": "르세라핌",
    "Chaewon": "채원", "金采源": "김채원", "采源": "채원",
    "Sakura": "사쿠라", "小櫻花": "사쿠라", "宮脇咲良": "사쿠라",
    "Yunjin": "윤진", "許允眞": "허윤진", "允眞": "윤진",
    "Kazuha": "카즈하", "中村一葉": "카즈하",
    "Eunchae": "은채", "洪恩採": "홍은채", "恩採": "은채",

    # BLACKPINK
    "BLACKPINK": "블랙핑크", "BP": "블랙핑크",
    "Jisoo": "지수", "智秀": "지수",
    "Jennie": "제니",
    "Rosé": "로제", "Rose": "로제",
    "Lisa": "리사",

    # TWICE
    "TWICE": "트와이스", "兔": "트와이스",
    "Nayeon": "나연", "娜璉": "나연",
    "Jeongyeon": "정연", "定延": "정연",
    "Momo": "모모",
    "Sana": "사나",
    "Jihyo": "지효", "志效": "지효",
    "Mina": "미나",
    "Dahyun": "다현", "多賢": "다현",
    "Chaeyoung": "채영", "彩瑛": "채영",
    "Tzuyu": "쯔위", "子瑜": "쯔위",

    # KISS OF LIFE
    "KISS OF LIFE": "키스오브라이프", "KIOF": "키스오브라이프", "吻": "키스오브라이프",
    "Julie": "쥴리",
    "Natty": "나띠",
    "Belle": "벨",
    "Haneul": "하늘",

    # QWER
    "QWER": "큐더블유이알",
    "Chodan": "쵸단",
    "Magenta": "마젠타",
    "Hina": "히나",
    "Siyeon": "시연",

    # BABYMONSTER
    "BABYMONSTER": "베이비몬스터", "Baemon": "베몬",
    "Ruka": "루카", "河井瑠花": "루카",
    "Pharita": "파리타",
    "Asa": "아사", "榎並杏紗": "아사",
    "Ahyeon": "아현", "雅譞": "아현", "鄭雅譞": "아현",
    "Rami": "라미", "河藍": "신하람", "申河藍": "신하람",
    "Rora": "로라", "多仁": "이다인", "李多仁": "이다인",
    "Chiquita": "치키타",

    # ILLIT
    "ILLIT": "아일릿",
    "Yunah": "윤아", "盧玧我": "윤아",
    "Minju": "민주", "朴敏珠": "민주",
    "Moka": "모카", "境 萌花": "모카",
    "Wonhee": "원희", "李沅禧": "원희",
    "Iroha": "이로하", "外園 彩羽": "이로하",

    # ARTMS
    "ARTMS": "아르테미스",
    "Heejin": "희진", "姬振": "희진", "田姬振": "희진",
    "Haseul": "하슬", "夏瑟": "하슬", "曹夏瑟": "하슬",
    "Kim Lip": "김립", "金定恩": "김정은",
    "Jinsoul": "진솔", "真率": "정진솔", "鄭真率": "정진솔",
    "Choerry": "최리", "崔𣫙": "최예림",

    # tripleS (24 Members)
    "tripleS": "트리플에스",
    
    # S1 - S10
    "SeoYeon": "서연", "舒妍": "서연", "尹舒姸": "윤서연",
    "HyeRin": "혜린", "慧潾": "혜린", "鄭慧潾": "정혜린",
    "JiWoo": "지우", "知禹": "지우", "李知禹": "이지우",
    "ChaeYeon": "채연", "采嬿": "채연", "金采嬿": "김채연",
    "YooYeon": "유연", "琉然": "유연", "金琉然": "김유연",
    "SooMin": "수민", "秀珉": "수민", "金秀珉": "김수민",
    "NaKyoung": "나경", "拏炅": "나경", "金拏炅": "김나경",
    "YuBin": "유빈", "裕彬": "유빈", "孔裕彬": "공유빈",
    "Kaede": "카에데", "楓": "카에데", "山田楓": "야마다 카에데",
    "DaHyun": "다현", "多賢": "다현", "徐多賢": "서다현",

    # S11 - S20
    "Kotone": "코토네", "琴音": "코토네", "嘉味元琴音": "카미모토 코토네",
    "YeonJi": "연지", "妍知": "연지", "郭妍知": "곽연지",
    "Nien": "니엔", "念慈": "니엔", "許念慈": "니엔",
    "SoHyun": "소현", "昭玹": "소현", "朴昭玹": "박소현",
    "Xinyu": "신위", "心語": "신위", "周心語": "신위",
    "Mayu": "마유", "真友": "마유", "高麗真友": "코마 마유",
    "Lynn": "린", "凜": "린", "川上凜": "카와카미 린",
    "JooBin": "주빈", "周彬": "주빈",
    "HaYeon": "하연", "夏妍": "하연", "丁夏妍": "정하연",
    "ShiOn": "시온", "示温": "시온", "朴示温": "박시온",

    # S21 - S24
    "ChaeWon": "채원", "采湲": "채원", "金采湲": "김채원",
    "Sullin": "설린", "薛琳": "설린",
    "SeoAh": "서아", "舒雅": "서아", "楷潾": "해린", "鄭楷潾": "정해린",
    "JiYeon": "지연", "諝娫": "지연", "池諝娫": "지서연",
    

    # === 3. 男團成員 (Boy Groups) ===
    # SEVENTEEN
    "SEVENTEEN": "세븐틴", "SVT": "세븐틴", 
    "S.Coups": "에스쿱스", "勝哲": "에스쿱스",
    "Jeonghan": "정한", "淨漢": "정한",
    "Joshua": "조슈아",
    "Jun": "준", "文俊輝": "준",
    "Hoshi": "호시", "權順榮": "호시",
    "Wonwoo": "원우", "圓佑": "원우",
    "Woozi": "우지", "李知勳": "우지",
    "The8": "디에잇", "徐明浩": "디에잇",
    "Mingyu": "민규", "珉奎": "민규",
    "DK": "도겸", "碩珉": "도겸",
    "Seungkwan": "승관", "勝寛": "승관",
    "Vernon": "버논",
    "Dino": "디노",

    # Stray Kids
    "Stray Kids": "스트레이 키즈", "SKZ": "스키즈", "迷": "스키즈",
    "Bang Chan": "방찬", "方燦": "방찬",
    "Lee Know": "리노",
    "Changbin": "창빈", "彰彬": "창빈",
    "Hyunjin": "현진", "鉉辰": "현진",
    "Han": "한", "知城": "한",
    "Felix": "필릭스",
    "Seungmin": "승민", "昇玟": "승민",
    "I.N": "아이엔", "精寅": "아이엔",

    # TXT
    "TXT": "투모로우바이투게더", "TOMORROW X TOGETHER": "투모로우바이투게더", "檔": "투모로우바이투게더",
    "Yeonjun": "연준", "然竣": "연준",
    "Soobin": "수빈", "秀彬": "수빈",
    "Beomgyu": "범규", "Beomgyu": "범규",
    "Taehyun": "태현", "太顯": "태현",
    "HueningKai": "휴닝카이",

    # RIIZE
    "RIIZE": "라이즈",
    "Shotaro": "쇼타로",
    "Eunseok": "은석",
    "Sungchan": "성찬",
    "Wonbin": "원빈",
    "Sohee": "소희",
    "Anton": "앤톤",

    # CORTIS 
    "CORTIS": "코르티스",
    "Martin": "마틴", "馬丁": "마틴",
    "James": "제임스", "詹姆斯": "제임스",
    "Juhoon": "주훈", "朱勳": "주훈",
    "Seonghyeon": "성현", "成賢": "성현",
    "Keonho": "건호", "建浩": "건호",

    # AllDay Project 
    "AllDay Project": "올데이 프로젝트", "ADP": "올데이 프로젝트",
    "Annie": "애니", "安妮": "애니",
    "Tarzzan": "타잔", "泰山": "타잔",
    "Bailey": "베일리", "貝利": "베일리",
    "Woochan": "우찬", "宇燦": "우찬", "趙宇燦": "우찬",
    "Youngseo": "영서", "榮書": "영서",

    # TWS
    "TWS": "투어스",
    "Shinyu": "신유", "申惟": "신유",
    "Dohoon": "도훈", "道勳": "도훈",
    "Youngjae": "영재", "英宰": "영재",
    "Hanjin": "한진", "涵珍": "한진",
    "Jihoon": "지훈", "志薰": "지훈",
    "Kyungmin": "경민", "暻潣": "경민",

    # BOYNEXTDOOR
    "BOYNEXTDOOR": "보이넥스트도어",
    "Sungho": "성호", "成淏": "성호",
    "Riwoo": "리우", "李常赫": "이상혁",
    "Jaehyun": "재현", "宰鉉": "명재현",
    "Taesan": "태산", "泰山": "한동민",
    "Leehan": "이한", "李峘": "김동현",
    "Woonhak": "운학", "雲鶴": "운학",

    # ZEROBASEONE (ZB1)
    "ZEROBASEONE": "제로베이스원", "ZB1": "제베원",
    "Jiwoong": "지웅", "志雄": "김지웅", "金志雄": "김지웅",
    "Zhang Hao": "장하오", "章昊": "장하오",
    "Hanbin": "한빈", "韓彬": "성한빈", "成韓彬": "성한빈",
    "Matthew": "석매튜", "馬修": "석매튜",
    "Taerae": "태래", "太來": "김태래", "金太來": "김태래",
    "Ricky": "리키", "沈泉銳": "리키",
    "Gyuvin": "규빈", "奎彬": "김규빈", "金奎彬": "김규빈",
    "Gunwook": "건욱", "乾旭": "박건욱", "朴乾旭": "박건욱",
    "Yujin": "유진", "維辰": "한유진", "韓維辰": "한유진",

    # === 4. 一般用語補強 ===
    "小卡": "포카", "Photo Card": "포카",
    "手燈": "응원봉", "周邊": "굿즈",
    "官咖": "팬카페", "Bubble": "버블", "Weverse": "위버스",
    "簽售": "팬싸", "回歸": "컴백",
    "JYP": "제이와이피", "HYBE": "하이브", "SM": "에스엠", "YG": "와이지",
    
    # === 5. 旅遊與生活 (保留原本的) ===
    "航班": "항공권", "機票": "항공권", "飛機": "비행기표",
    "怎麼去": "가는법", "路線": "코스", "交通": "교통편",
    "地鐵": "지하철", "公車": "버스", "計程車": "택시",
    "首爾": "서울", "釜山": "부산", "弘大": "홍대", "聖水": "성수",
    "必買": "쇼핑리스트", "美食": "맛집", "好吃": "맛집",
    "藥妝": "올리브영", "Olive Young": "올리브영"
}

# Pre-compile the regex pattern for optimized lookup
# Sort by length descending to handle overlapping keys correctly (e.g. "Olive Young" vs "IVE")
SORTED_KEYS = sorted(CORRECTIONS.keys(), key=len, reverse=True)
DICT_REGEX = re.compile("|".join(map(re.escape, SORTED_KEYS)), flags=re.IGNORECASE)
